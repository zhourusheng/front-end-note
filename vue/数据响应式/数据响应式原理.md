### Vue响应式原理

[深入浅出Vue响应式原理](https://github.com/ljianshu/Blog/issues/70)


### （一）响应式过程

  1) 数据劫持 / 数据代理: 侦测数据的变化
  2) 依赖收集: 收集视图依赖了哪些数据
  3) 发布订阅模式: 发布订阅模式

### （二）如何侦测数据变化

#### Object.defineProperty 注意点

  ##### 1.无法检测到对象属性的添加或者删除
      这是因为 Vue 通过Object.defineProperty来将对象的key转换成getter/setter的形式来追踪变化，
      但getter/setter只能追踪一个数据是否被修改，无法追踪新增属性和删除属性。
      如果是删除属性，我们可以用vm.$delete实现，那如果是新增属性，该怎么办：
        1) 可以使用 Vue.set(location, a, 1) 方法向嵌套对象添加响应式属性
        2) 也可以给这个对象重新赋值，比如 data.location = {...data.location,a:1}

  ##### 2. 无法监听数组变化，需要对数组操作方法重写
      这种方法将数组的常用方法进行重写，进而覆盖掉原生的数组方法，重写之后的数组方法需要能够被拦截。
      但有些数组操作Vue时拦截不到的，当然也就没办法响应，比如：
        obj.length-- // 不支持数组的长度变化
        obj[0]=1  // 修改数组中第一个元素，也无法侦测数组的变化

#### ES6 Proxy

### （三） 为什么要依赖收集

### （四）订阅者Dep

### （五）观察者Watcher

### （六）依赖收集

  